(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{410:function(t,s,n){"use strict";n.r(s);var a=n(45),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"nginx的简要说明及配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的简要说明及配置"}},[t._v("#")]),t._v(" nginx的简要说明及配置")]),t._v(" "),n("h2",{attrs:{id:"nginx-是什么"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-是什么"}},[t._v("#")]),t._v(" nginx 是什么?")]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),n("p",[t._v("nginx 是一个高性能的 http 和反向代理 "),n("font",{attrs:{face:"黑体",color:"red",size:"7"}},[t._v("web服务器")]),t._v("\nnginx 以事件驱动的方式编写，所以有非常好的性能。在性能上，nginx 占用很少的系统资源，能支持更多的并发连接，达到更高的访问效率\n在功能上，nginx 是优秀的代理服务器和负载均衡服务器；在安装配置上，Nginx安装简单、配置灵活。")],1)]),t._v(" "),n("h2",{attrs:{id:"服务器下安装nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务器下安装nginx"}},[t._v("#")]),t._v(" 服务器下安装nginx")]),t._v(" "),n("ul",[n("li",[t._v("选定安装文件目录")])]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local\n")])])]),n("ul",[n("li",[t._v("安装PCRE库")])]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/src\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz \n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf pcre-8.37.tar.gz\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" pcre-8.34\n  ./configure\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),n("p",[t._v("-安装zlib库")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/src\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://zlib.net/zlib-1.2.11.tar.gz\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf zlib-1.2.11.tar.gz\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" zlib-1.2.11\n  ./configure\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),n("p",[t._v("-安装nginx")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/local/src\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" http://nginx.org/download/nginx-1.1.10.tar.gz\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -zxvf nginx-1.1.10.tar.gz\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" nginx-1.1.10\n  ./configure\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),n("p",[t._v("-启动nginx")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" /usr/local/nginx/nginx\n")])])]),n("h2",{attrs:{id:"nginx的常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx的常用命令"}},[t._v("#")]),t._v(" nginx的常用命令")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  /usr/local/nginx/sbin/nginx -C /usr/local/nginx/conf/nginx.conf //启动nginx\n  nginx -t  //查看nginx 的配置文件是否正确\n  nginx -s reload  //重启nginx 服务\n  nginx -v  //查看是否安装nginx 及其版本号\n")])])]),n("h2",{attrs:{id:"nginx-的配置文件结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-的配置文件结构"}},[t._v("#")]),t._v(" nginx 的配置文件结构")]),t._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### 每个指令必须有分号结束。###")]),t._v("\n  user administrator "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#配置用户或者组，默认为nobody")]),t._v("\n  worker_processes "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#允许生成的进程数，默认为1")]),t._v("\n  pid /nginx/pid/nginx.pid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#指定nginx进程运行文件存放地址")]),t._v("\n  error_log log/error.log debug"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#制定日志路径，级别。这个设置可以放入全局块，http块，server块，级别以此为：debug|info|notice|warn|error|crit|alert|emerg")]),t._v("\n  events "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      accept_mutex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置网路连接序列化，防止惊群现象发生，默认为on")]),t._v("\n      multi_accept on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置一个进程是否同时接受多个网络连接，默认为off")]),t._v("\n      use epoll"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#事件驱动模型，select|poll|kqueue|epoll|resig|/dev/poll|eventport")]),t._v("\n      worker_connections  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#最大连接数，默认为512")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  http "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      include       mime.types"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#文件扩展名与文件类型映射表")]),t._v("\n      default_type  application/octet-stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#默认文件类型，默认为text/plain")]),t._v("\n      access_log off"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#取消服务日志    ")]),t._v("\n      log_format myFormat "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),t._v("–"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_user")]),t._v(" ["),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$time_local")]),t._v("] "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$body_bytes_sent")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_referer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_user_agent")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$http_x_forwarded_for")]),t._v("'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#自定义格式")]),t._v("\n      access_log log/access.log myFormat"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#combined为日志格式的默认值")]),t._v("\n      sendfile on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#允许sendfile方式传输文件，默认为off，可以在http块，server块，location块。")]),t._v("\n      sendfile_max_chunk 100k"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限。")]),t._v("\n      keepalive_timeout "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#连接超时时间，默认为75s，可以在http，server，location块。")]),t._v("\n\n      include  /usr/local/nginx/conf/cyy/*.conf  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#(映射该路径下所有的 .conf 文件)")]),t._v("\n      upstream mysvr "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   \n        server "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:7878"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".10.121:3333 backup"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#热备")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      error_page "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" https://www.baidu.com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#错误页")]),t._v("\n      server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          keepalive_requests "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("120")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#单连接请求上限次数。")]),t._v("\n          listen       "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#监听端口")]),t._v("\n          server_name  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#监听地址       ")]),t._v("\n          location / "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#请求的url过滤")]),t._v("\n            root  path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#根目录(vue的dist 文件目录)")]),t._v("\n            index index.html index.htm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置默认页")]),t._v("\n            proxy_pass  http://127.0.0.1:8088"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#请求转向mysvr 定义的服务器列表")]),t._v("\n            deny "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#拒绝的ip")]),t._v("\n            allow "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.18")]),t._v(".5.54"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#允许的ip           ")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);